<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Partner Form View -->
    <record id="view_partner_form" model="ir.ui.view">
        <field name="name">res.partner.form.inherit.global.discount</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_form"/>
        <field name="arch" type="xml">
            <xpath expr="//page[@name='sales_purchases']" position="inside">
                <group string="Global Discounts" name="global_discounts">
                    <field name="global_discount_ids" widget="many2many_tags" 
                           options="{'color_field': 'id', 'no_create_edit': True}"
                           placeholder="Select global discounts..."/>
                </group>
            </xpath>
        </field>
    </record>

    <!-- Partner Search View -->
    <record id="view_partner_search" model="ir.ui.view">
        <field name="name">res.partner.search.inherit.global.discount</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_res_partner_filter"/>
        <field name="arch" type="xml">
            <xpath expr="//filter[@name='inactive']" position="after">
                <separator/>
                <filter string="With Global Discounts" name="has_global_discounts"
                        domain="[('global_discount_ids', '!=', False)]"/>
            </xpath>
            <xpath expr="//search/field[@name='name']" position="after">
                <field name="global_discount_ids" string="Global Discount"/>
            </xpath>
        </field>
    </record>
</odoo>

